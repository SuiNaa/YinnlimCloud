<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>æ‰¾å›å¯†ç¢¼ï¼ˆå¤šæ‡‰ç”¨ï¼‰</title>
<style>
  :root{ --brand:#6c4ef7; --muted:#777; }
  *{ box-sizing:border-box }
  body{
  margin:0; background:#f5f7fb; color:#222;
  font-family: "DFKai-SB","KaiTi","æ¨™æ¥·é«”","BiauKai",serif;
  display:grid; place-items:center; min-height:100vh;
}
  .card{
    width:min(460px, 92vw); background:#fff; border:1px solid #eee; border-radius:16px;
    box-shadow:0 14px 38px rgba(0,0,0,.08); padding:18px;
  }
  h1{ margin:4px 0 2px; font-size:20px }
  p{ margin:6px 0 14px; color:var(--muted) }
  label{ display:block; font-size:13px; color:var(--muted); margin:6px 0 }
  .row{ display:flex; gap:10px; align-items:center; }
  .input{ width:100%; padding:12px 14px; border:1px solid #ddd; border-radius:12px; outline:none; }
  .btn{ padding:12px 16px; border-radius:12px; border:1px solid transparent; background:var(--brand); color:#fff; font-weight:800; cursor:pointer; }
  .btn[disabled]{ opacity:.6; cursor:not-allowed }
  .msg{ margin-top:10px; font-size:14px; }
  .ok{ color:#1b8f46; }
  .err{ color:#b00020; }
  .back{ display:inline-block; margin-top:16px; color:var(--brand); text-decoration:none; font-weight:700 }
  .apps{ display:flex; gap:8px; flex-wrap:wrap; margin:10px 0 6px; }
  .tab{
    padding:8px 10px; border:1px solid #ddd; border-radius:10px; background:#fff; cursor:pointer; font-weight:700;
  }
  .tab.active{ border-color:var(--brand); box-shadow:0 0 0 3px rgba(108,78,247,.12) }
  small.hint{ display:block; color:#999; margin-top:6px }
  .menu-wrap{
  position:fixed;
  top:10px;   /* è·é›¢ä¸Šæ–¹ */
  left:10px;  /* é å·¦å´ */
  display:flex;
  gap:6px;    /* â† å’Œè¿”å›éµã€% éµçš„é–“è· */
  z-index:2000;
}
.menu-btn, .back-btn{
  width:50px; height:50px;
  border-radius:50%;
  border:1px solid #ccc;
  background:#fff;
  cursor:pointer;
  font-weight:900;
}
body.dark .menu-btn, body.dark .back-btn{
  background:#333; color:#fff; border-color:#555;
}
/* ========== ä¸»é¡Œè®Šæ•¸ï¼ˆèˆ‡å‰é¢é é¢ä¸€è‡´ï¼‰ ========== */
:root{
  --brand:#6c4ef7; --muted:#777;
  /* ç™½å¤© dropdownï¼šæ·¡ç²‰ */
  --dropdown-bg:#fdeaff;
  --dropdown-border:#f5ccff;
  --dropdown-text:#4a3a6a;

  --page-bg:#f5f7fb;
  --card-bg:#fff;
  --card-border:#eee;

  --btn-bg:#fff;
  --btn-border:#ddd;
  --btn-text:#222;
}
html[data-theme="dark"]{
  --text:#cfc3ff;
  --muted:#9a8fd1;
  --brand:#a48cff;

  --page-bg:#0f0b1a;
  --card-bg:#161222;
  --card-border:#2b2440;

  --btn-bg:#1b1629;
  --btn-border:#2b2440;
  --btn-text:#cfc3ff;
  --shadow:0 10px 28px rgba(0,0,0,.45);
}

/* å…¨å±€å¥—è‰² */
body{ background:var(--page-bg); color:#222; }
html[data-theme="dark"] body{ color:var(--text); }
html[data-theme="dark"] .card{ background:var(--card-bg); border-color:var(--card-border); box-shadow:var(--shadow); }
html[data-theme="dark"] .input{ background:transparent; border:1px solid var(--card-border); color:var(--text); }
html[data-theme="dark"] .btn{ background:var(--btn-bg); border:1px solid var(--btn-border); color:var(--btn-text); }
html[data-theme="dark"] .btn[disabled]{ opacity:.6; }
html[data-theme="dark"] .btn:not([disabled]).primary{ background:var(--brand); color:#161222; border-color:transparent; }

/* è®“ç¾æœ‰çš„ card/æ–‡å­—é¡è‰²è·Ÿè‘—è®Š */
.card{ background:var(--card-bg); border:1px solid var(--card-border); }
p, .hint, .msg, small, label{ color:var(--muted); }
.btn{ background:var(--btn-bg); border:1px solid var(--btn-border); color:var(--btn-text); }

/* ========== å·¦ä¸Šè§’ï¼šè¿”å›ï¼‹ï¼…åœ“çƒ ========== */
.menu-wrap{
  position:fixed;
  top:10px;               /* æƒ³æ›´è²¼é‚Šå°±æ”¹å°ä¸€é»ï¼Œä¾‹å¦‚ 6px */
  left:10px;
  display:flex;
  gap:6px;
  z-index:2000;           /* é«˜æ–¼å…§å®¹ */
}
.menu-btn, .back-btn{
  width:36px; height:36px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  font-weight:900; line-height:1;
  background:var(--btn-bg); color:var(--btn-text);
  border:1px solid var(--btn-border);
  cursor:pointer;
  box-shadow:0 4px 12px rgba(0,0,0,.12);
}
.menu-btn:hover, .back-btn:hover{ transform:scale(1.05); }
.menu-btn:active, .back-btn:active{ transform:scale(.96); }
html[data-theme="dark"] .menu-btn,
html[data-theme="dark"] .back-btn{ box-shadow:none; }

/* ä¸‹æ‹‰é¸å–®ï¼šä¸æ“ ç‰ˆé¢ã€åœ¨æŒ‰éˆ•ä¸‹æ–¹å±•é–‹ã€é¿å…è¶…å‡ºè¢å¹• */
.dropdown{
  position:fixed;               /* è·Ÿè‘—è¦–çª—ï¼Œä¸æ¨æ“ å…§å®¹ */
  top:56px;                     /* 36 é«˜ + 10 ä¸Šé‚Šè· + ç·©è¡ */
  left:10px;
  min-width:220px; max-width:min(90vw, 360px);
  border-radius:14px; padding:8px;
  transform:translateY(-6px) scale(.98);
  opacity:0; visibility:hidden; pointer-events:none;
  transition:opacity .16s ease, transform .18s cubic-bezier(.2,.8,.2,1);
  background:var(--dropdown-bg); color:var(--dropdown-text);
  border:1px solid var(--dropdown-border);
  box-shadow:0 16px 32px rgba(0,0,0,.18);
}
.dropdown.show{ opacity:1; visibility:visible; pointer-events:auto; transform:translateY(0) scale(1); }
/* å¤œé–“çš„ä¸‹æ‹‰ */
html[data-theme="dark"] .dropdown{
  background:var(--card-bg); color:var(--text);
  border:1px solid var(--card-border); box-shadow:var(--shadow);
}
.dropdown::after{ content:none; }    /* å»æ‰çªèµ·ç®­é ­ */
.dropdown .item{
  width:100%; text-align:left; padding:10px 12px;
  border:0; background:transparent; color:inherit;
  border-radius:8px; cursor:pointer; transition:.12s;
}
.dropdown .item:hover{ background:rgba(164,140,255,.12); transform:translateY(-1px); }

/* å°è¢å¹•å®‰å…¨é‚Šç•Œï¼ˆé¿å…è¢«å³é‚Šå¡ä½ï¼‰ */
@media (max-width:480px){
  .dropdown{ left:6px; right:6px; max-width:none; }
}
</style>
</head>
<body>
    <div class="menu-wrap">
  <!-- è¿”å›æŒ‰éˆ• -->
  <button class="back-btn" onclick="history.back()">â†Esc</button>
  <!-- % é¸å–® -->
  <button id="menuBtn" class="menu-btn" aria-expanded="false" onclick="toggleMenu()">%</button>
  <div id="menuDrop" class="dropdown" role="menu">
    <button class="item" onclick="toggleTheme()" id="modeItem">åˆ‡æ›æ¨¡å¼ï¼šå¤œé–“</button>
     <button class="item" onclick="location.href='../index.html'">ä¸»é </button>
    <button class="item" onclick="location.href='Grove.Examination-Yuan.html'">åƒåŠ ç®¡ç†å“¡</button>
    <button class="item" onclick="location.href='Grove. Control-Yuan.html'">Control</button>
    <button class="item" onclick="location.href='Grove.Executive-Yuan.html'">Executive</button>
    <button class="item" onclick="location.href='Grove.Judicial-Yuan.html'">ç”³è¨´</button>
    <button class="item" onclick="location.href='Grove.Legislative-Yuan.html'">Legislative</button>
    <button class="item" onclick="location.href='vote.html'">æŠ•ç¥¨å°ˆå€</button>
    <button class="item" onclick="location.href='constitution.html'">ç¶²ç«™ç”³æ˜</button>
  </div>
</div>
  <div class="card">
    <h1>æ‰¾å›å¯†ç¢¼</h1>
    <p>è«‹é¸æ“‡è¦é‡ç½®çš„å€åŸŸã€‚</p>

    <!-- æ‡‰ç”¨åˆ‡æ› -->
    <div class="apps">
      <button class="tab active" data-app="store">Sunlit Grove Store</button>
      <button class="tab" data-app="grove">Grove Hubï¼ˆsunlit Cloudï¼‰</button>
      <button class="tab" data-app="lim">LimTownï¼ˆYinnlimï¼‰</button>
    </div>
    <small id="targetHint" class="hint">ç›®å‰ï¼šSunlit Grove Store</small>

    <label for="email">é›»å­éƒµä»¶ï¼ˆEmailï¼‰</label>
    <div class="row">
      <input id="email" class="input" type="email" placeholder="you@example.com" autocomplete="email" required>
      <button id="go" class="btn" onclick="sendReset()">ç¢ºèª</button>
    </div>
    <div id="msg" class="msg"></div>

    <!-- æˆåŠŸå¾Œé¡¯ç¤º -->
    <button id="backStore" class="btn" style="display:none; margin-top:10px;"
            onclick="location.href='shopping.html'">
      å·²ç¶“é‡ç½®ï¼Œå› Store
    </button>

    <a class="back" href="shopping.html">â† è¿”å› Store</a>
  </div>

<script>
/* ===== å¤šæ‡‰ç”¨è¨­å®šï¼ˆå‰ç«¯åªæ”¾ Server / AppID / AppKeyï¼›åˆ¥æ”¾ Master Keyï¼‰ ===== */
const APPS = {
  // ä½ çš„ã€ŒåŸå§‹ç¢¼è£¡é‚£çµ„ã€â†’ Sunlit Grove Store
  store: {
    label: 'Sunlit Grove Store',
    server: 'https://zdqo2eqb.lc-cn-n1-shared.com',
    appId:  'ZDqo2eQBcSChCfRgwix9jUeI-gzGzoHsz',
    appKey: 'U66ybZWAD99LrT9zJnQlW52H'
  },
  // Grove Hubï¼ˆsunlit Cloudï¼‰
  grove: {
    label: 'Grove Hubï¼ˆsunlit Cloudï¼‰',
    server: 'https://0juo0jzb.lc-cn-n1-shared.com',
    appId:  '0juO0jzBkrv1Oi04bHljaWDW-gzGzoHsz',
    appKey: 'kFMz8niEbd8BlPbFKDyTZC2Q'
  },
  // LimTownï¼ˆYinnlimï¼‰
  lim: {
    label: 'LimTownï¼ˆYinnlimï¼‰',
    server: 'https://jxpf13zi.lc-cn-n1-shared.com',
    appId:  'jxPF13ZiTBmbFt75fXRnYs42-gzGzoHsz',
    appKey: 'ydXYcG0fGtWLgWetR0szCygQ'
  }
};

// é è¨­é¸ Store
let currentKey = 'store';

const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));

function updateActive(appKey){
  currentKey = appKey;
  $$('.tab').forEach(b=>{
    b.classList.toggle('active', b.dataset.app === appKey);
  });
  $('#targetHint').textContent = 'ç›®å‰ï¼š' + APPS[appKey].label;
  // æˆåŠŸå¾Œçš„è¿”å›å­—æ¨£å›ºå®šå› Storeï¼Œå¦‚éœ€ä¸åŒé é¢å¯åœ¨æ­¤ä¾ appKey æ”¹é€£çµ
  $('#backStore').style.display = 'none';
  $('#msg').className = 'msg';
  $('#msg').textContent = '';
}
$$('.tab').forEach(b=>{
  b.addEventListener('click', ()=> updateActive(b.dataset.app));
});

/* ===== ç™¼é€é‡è¨­å¯†ç¢¼ Email =====
   LeanCloud REST: POST {server}/1.1/requestPasswordReset  body: { email }
   æˆåŠŸæˆ–å¤±æ•—éƒ½é¡¯ç¤ºåŒæ¨£çš„è¨Šæ¯ï¼Œé¿å…è¢«ç”¨ä¾†çŒœå¸³è™Ÿã€‚
*/
async function sendReset(){
  const cfg = APPS[currentKey];
  const API = cfg.server + '/1.1';
  const APP_ID  = cfg.appId;
  const APP_KEY = cfg.appKey;

  const email = $('#email').value.trim();
  const btn = $('#go');
  const msg = $('#msg');

  msg.className = 'msg'; msg.textContent = '';
  if(!email){
    msg.classList.add('err'); msg.textContent = 'è«‹å…ˆè¼¸å…¥é›»å­éƒµä»¶ã€‚';
    return;
  }

  btn.disabled = true;

  try{
    const res = await fetch(`${API}/requestPasswordReset`, {
      method:'POST',
      headers:{
        'Content-Type':'application/json',
        'X-LC-Id': APP_ID,
        'X-LC-Key': APP_KEY
      },
      body: JSON.stringify({ email })
    });

    // ä¸è«–æˆåŠŸæˆ–å¤±æ•—éƒ½é¡¯ç¤ºç›¸åŒæç¤ºï¼ˆé¿å…å¸³è™Ÿæ¢æ¸¬ï¼‰ï¼›éŒ¯èª¤ç´°ç¯€åƒ…å¯«åˆ° console
    if(!res.ok){
      const data = await res.json().catch(()=> ({}));
      console.warn('reset error:', data);
    }

    msg.classList.add('ok');
    msg.textContent = `å¦‚æœæ­¤é›»å­éƒµä»¶å·²è¨»å†Šï¼ˆ${cfg.label}ï¼‰ï¼Œæˆ‘å€‘å·²å¯„å‡ºé‡è¨­å¯†ç¢¼çš„éƒµä»¶ï¼Œè«‹å‰å¾€ä¿¡ç®±é»æ“Šé€£çµå®Œæˆé‡è¨­ã€‚`;
    $('#backStore').style.display = 'inline-block';
  }catch(e){
    console.warn(e);
    msg.classList.add('err');
    msg.textContent = 'ç›®å‰ç„¡æ³•é€å‡ºéƒµä»¶ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚';
  }finally{
    btn.disabled = false;
  }
}
</script>
<script src="im.js"></script>
<!--=================-->
<p style="text-align: center; font-size: 13px; color: #999; margin-top: 40px;">
  ğŸ¾ Â© 2024 yinnlimçš„å°å®‡å®™ï½œå…§å®¹èˆ‡è¨­è¨ˆçš†ç”±ç³–ç³–æœ¬äººç”¨æ„›è£½ä½œ ğŸ’<br>
  æœªç¶“æˆæ¬Šè«‹å‹¿éš¨æ„ä½¿ç”¨ã€ç›œè½‰å–” ğŸ™…â€â™€ï¸ è¬è¬ä½ çš„å°Šé‡èˆ‡æº«æŸ” ğŸ’Œ
</p>
</body>
</html>