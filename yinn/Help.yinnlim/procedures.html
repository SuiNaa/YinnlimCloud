<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>è·¨æ€§åˆ¥æ‰‹è¡“è³‡æ–™æŸ¥è©¢</title>
<meta name="color-scheme" content="dark">
<style>
:root{
  --bg:#0f0d14; --card:#17151f; --ink:#eceaf2; --muted:#a9a6b3; --border:#2b2637; --accent:#b78ad3;
  --chip:#1f1a2b; --good:#76d39b; --bad:#e38f8f; --maxw:1160px;
}
*{box-sizing:border-box} body{margin:0;background:linear-gradient(160deg,#13111a,#191627);color:var(--ink);
  font-family:ui-sans-serif,system-ui,"Noto Sans TC","Microsoft JhengHei";}
.wrap{max-width:var(--maxw);margin:0 auto;padding:18px 14px}

/* Header */
.header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.h-left{display:flex;align-items:center;gap:10px}
.badge{display:inline-flex;align-items:center;gap:6px;font-size:.82rem;padding:4px 10px;border:1px solid var(--border);
  border-radius:999px;background:#1f1a2b}
.btn{display:inline-flex;align-items:center;gap:8px;background:var(--accent);color:#120d18;border:none;border-radius:12px;
  padding:10px 12px;cursor:pointer;font-weight:700}
.btn.small{padding:8px 10px} .btn.ghost{background:transparent;color:#fff;border:1px solid var(--border)}

/* Search bar */
.toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;background:var(--card);border:1px solid var(--border);
  border-radius:14px;padding:10px 12px;margin-bottom:12px}
.input,.select{background:#1e1a28;color:#fff;border:1px solid var(--border);border-radius:12px;padding:10px 12px;font-size:1rem}
.input{flex:1 1 360px} .chips{display:flex;gap:6px;flex-wrap:wrap}
.chip{background:var(--chip);border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-size:.85rem;cursor:pointer}
.chip.active{outline:2px solid var(--accent)} .count{color:#d7d4e5;font-size:.9rem;margin-left:auto}

/* Grid cards */
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
@media (max-width:1000px){ .grid{grid-template-columns:repeat(2,1fr)} }
@media (max-width:640px){ .grid{grid-template-columns:1fr} }
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;overflow:hidden;display:flex;flex-direction:column}
.thumb{position:relative;aspect-ratio:16/9;background:#181525}
.thumb img{width:100%;height:100%;object-fit:cover;display:block}
.thumb .tagbar{position:absolute;left:8px;bottom:8px;display:flex;gap:6px;flex-wrap:wrap}
.thumb .tag{background:rgba(0,0,0,.55);border:1px solid rgba(255,255,255,.12);backdrop-filter:blur(2px);
  color:#eceaf2;font-size:.78rem;padding:4px 8px;border-radius:999px}
.body{padding:10px 12px;display:flex;flex-direction:column;gap:8px}
.name{font-weight:800}
.meta{display:flex;gap:8px;flex-wrap:wrap;color:var(--muted);font-size:.9rem}
.actions{display:flex;gap:8px;margin-top:auto}
.actions .btn{flex:1}

/* Modal */
.modal{position:fixed;inset:0;display:none;place-items:center;z-index:1000;background:rgba(0,0,0,.45);backdrop-filter:blur(2px)}
.modal.show{display:grid}
.box{width:min(92vw,920px);max-height:92vh;overflow:auto;background:var(--card);border:1px solid var(--border);border-radius:16px}
.mhead{display:flex;justify-content:space-between;align-items:center;padding:12px;border-bottom:1px solid var(--border)}
.mtitle{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.mbody{padding:12px}
.hero{width:100%;aspect-ratio:16/9;border-radius:12px;overflow:hidden;background:#181525;margin-bottom:12px}
.hero img{width:100%;height:100%;object-fit:cover}
.kv{display:grid;grid-template-columns:140px 1fr;gap:10px;padding:10px 0;border-bottom:1px dashed var(--border)}
.k{color:var(--muted)}
.v ul{margin:0;padding-left:18px}
.v li{margin:.25rem 0}
.pro{color:var(--good)} .con{color:var(--bad)}
.note{background:#14111d;
border:1px dashed var(--border);padding:8px 10px;border-radius:10px;color:#d1cfe0;margin-top:6px}
.hero { display: none !important; }
.E{
  text-decoration: none;  
}
</style>
</head>
<body>
<div class="wrap">
  <div class="header">
    <div class="h-left">
      <h1 style="margin:0;font-size:clamp(20px,4.6vw,28px)">è·¨æ€§åˆ¥æ‰‹è¡“è³‡æ–™æŸ¥è©¢</h1>
      <button class="btn small ghost"><a href="ll.html">è©³æƒ…</a></button>
      <div><button id="compareBtn" class="btn small ghost">è¡“å¼å°æ¯”</button>â†é»æ“ŠæŸ¥çœ‹</div>
    </div>
    <button class="btn small ghost"><a href="help.html" class="E" >è¿”å›</a></button>
  </div>

  <!-- æœå°‹/ç¯©é¸åˆ— -->
  <div class="toolbar">
    <input id="q" class="input" placeholder="æœå°‹ï¼šè¡“å¼ï¼é—œéµå­—â€¦" autocomplete="off">
    <select id="cat" class="select">
      <option value="all">å…¨éƒ¨é¡åˆ¥</option>
      <option value="MTF">MTF</option>
      <option value="FTM">FTM</option>
      <option value="NB">éäºŒå…ƒ/å…¶ä»–</option>
    </select>
    <div class="chips" id="chips">
      <div class="chip" data-tag="é™°é“æˆå½¢">é™°é“æˆå½¢</div>
      <div class="chip" data-tag="é™°è–æˆå½¢">é™°è–æˆå½¢</div>
      <div class="chip" data-tag="ä¸Šèƒ¸">ä¸Šèƒ¸</div>
      <div class="chip" data-tag="å°¿é“å»¶é•·">å°¿é“å»¶é•·</div>
    </div>
    <span id="count" class="count">0 å€‹çµæœ</span>
  </div>

  <!-- ç¸®ç•¥å¡ç‰‡ -->
  <section id="grid" class="grid"></section>
</div>

<!-- è©³ç´° Modal -->
<div id="modal" class="modal" aria-hidden="true">
  <article class="box" role="dialog" aria-modal="true">
    <div class="mhead">
      <div class="mtitle">
        <strong id="m-name"></strong>
        <span class="badge" id="m-cat"></span>
      </div>
      <button id="m-close" class="btn small ghost">é—œé–‰</button>
    </div>
    <div class="mbody">
      <div class="hero"><img id="m-img" alt=""></div>
      <div class="kv"><div class="k">æ‘˜è¦</div><div class="v" id="m-summary"></div></div>
      <div class="kv"><div class="k">å„ªé»</div><div class="v"><ul id="m-pros"></ul></div></div>
      <div class="kv"><div class="k">ç¼ºé»</div><div class="v"><ul id="m-cons"></ul></div></div>
      <div class="kv"><div class="k">é©æ‡‰ç—‡</div><div class="v"><ul id="m-inds"></ul></div></div>
      <div class="kv"><div class="k">å¸¸è¦‹é¢¨éšª</div><div class="v"><ul id="m-risks"></ul></div></div>
      <div class="kv"><div class="k">è¡“å¾Œç…§è­·</div><div class="v"><ul id="m-after"></ul></div></div>
      <div class="kv"><div class="k">ç­‰å¾…/è²»ç”¨</div><div class="v" id="m-meta"></div></div>
      <div class="note" id="m-note" style="display:none"></div>
    </div>
  </article>
</div>
<div id="compareModal" class="modal">
  <div class="modal-box">
    <div class="bar">
      <h3 style="margin:0">è¡“å¼å°æ¯”è¡¨</h3>
      <button id="closeCompare" class="btn ghost">é—œé–‰</button>
    </div>
    <div style="overflow-x:auto; max-height:80vh; overflow-y:auto">
      <!-- å°æ¯”è¡¨æ ¼ -->
      <table border="1" style="width:100%; border-collapse:collapse; text-align:center">
        <thead>
          <tr>
            <th>ä½µç™¼ç—‡</th>
            <th>é™°è–åè½‰çš®ç“£</th>
            <th>è…¸é“æ‰‹è¡“</th>
            <th>é”æ–‡è¥¿è…¹è†œçš®ç“£</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>è¼¸è¡€</td><td>4.1%</td><td></td><td>5-6%</td></tr>
          <tr><td>è…¸é˜»å¡</td><td></td><td>1.8%</td><td>2-4%</td></tr>
          <tr><td>ç›´è…¸æå‚·</td><td>1.7â€“10%</td><td>2.38% (0.5%é€ å£)</td><td>1%</td></tr>
          <tr><td>è…¸é“æ¥å£æ»²æ¼</td><td></td><td>0.4%</td><td></td></tr>
          <tr><td>çš®ç“£(é™°é“)å£æ­»</td><td>2.7â€“4%</td><td>1.1â€“2.38%</td><td></td></tr>
          <tr><td>é™°é“ç›´è…¸ç˜»ç®¡</td><td>1.7â€“3.3%</td><td>0.7%</td><td>0.2%</td></tr>
          <tr><td>å°¿é“é™°é“ç˜»ç®¡</td><td>0.6â€“2.46%</td><td>0.6%</td><td></td></tr>
          <tr><td>è…¹å…§ç©æ¶²/è†¿ç˜</td><td>2.7%</td><td>4.76%</td><td>2%</td></tr>
          <tr><td>å°¿é“æå‚·</td><td>0â€“3.6%</td><td></td><td></td></tr>
          <tr><td>å°¿é“ç‹¹çª„</td><td>16%</td><td>2%</td><td></td></tr>
          <tr><td>å°¿é“å£æ­»</td><td>1.3%</td><td></td><td></td></tr>
          <tr><td>å°¿æ¶²æ»¯ç•™(æš«æ™‚)</td><td>8â€“10%</td><td></td><td>2â€“7%</td></tr>
          <tr><td>ç‹¹çª„</td><td>4â€“7.2%</td><td>11â€“18%</td><td>7% (å°æ–¼11å…¬åˆ†)</td></tr>
          <tr><td>è„«å‚</td><td>2.84%</td><td>2.3â€“28%</td><td></td></tr>
          <tr><td>é™°é“ç‚</td><td></td><td>13%</td><td></td></tr>
          <tr><td>éé‡é™°é“åˆ†æ³Œç‰©</td><td></td><td>7â€“38%</td><td></td></tr>
          <tr><td>å‚·å£ç™’åˆä¸è‰¯</td><td>15.1%</td><td></td><td>10â€“15%</td></tr>
          <tr><td>è¡€è…«</td><td></td><td>2%</td><td></td></tr>
          <tr><td>å»¶é²å¾©åŸ</td><td></td><td>39.7%</td><td></td></tr>
          <tr><td>åŠæ™‚ä½µç™¼ç—‡éœ€æ‰‹è¡“</td><td></td><td>2%</td><td></td></tr>
          <tr><td>ä»»ä½•åŸå› éœ€äºŒæ¬¡æ‰‹è¡“</td><td>22â€“27%</td><td>17.8%</td><td></td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<script src="pro.js?v=1.0.1"></script>
<script>
/* ====== ç¸®ç•¥å¡æ¸²æŸ“ ====== */
const $ = (s,el=document)=>el.querySelector(s);
const $$ = (s,el=document)=>[...el.querySelectorAll(s)];
const grid = $('#grid'), qEl = $('#q'), catEl = $('#cat'), chips = $('#chips'), countEl = $('#count');

function cardTpl(it){
  const el = document.createElement('article');
  el.className = 'card';
  el.innerHTML = `
    <div class="thumb">
      <img src="${it.img}" alt="">
      <div class="tagbar">${(it.tags||[]).slice(0,3).map(t=>`<span class="tag">${t}</span>`).join('')}</div>
    </div>
    <div class="body">
      <div class="name">${it.name}</div>
      <div class="meta">
        <span>é¡åˆ¥ï¼š${it.category}</span>
        <span>ç­‰å¾…ï¼š${it.wait||'â€”'}</span>
        <span>è²»ç”¨ï¼š${it.cost||'â€”'}</span>
      </div>
      <div class="meta" style="color:#dcd9ea">${it.summary}</div>
      <div class="actions">
        <button class="btn small" data-open="${it.id}">æŸ¥çœ‹è©³æƒ…</button>
        <button class="btn small ghost" data-copy="${it.id}">è¤‡è£½é€£çµ</button>
      </div>
    </div>`;
  return el;
}

function render(items){
  grid.innerHTML = '';
  items.forEach(it=>grid.appendChild(cardTpl(it)));
  countEl.textContent = `${items.length} å€‹çµæœ`;

  // ç¶å®šæŒ‰éˆ•
  $$('[data-open]').forEach(btn=>{
    btn.onclick = ()=>openModal(items.find(x=>x.id===btn.dataset.open));
  });
  $$('[data-copy]').forEach(btn=>{
    btn.onclick = async ()=>{
      const url = location.origin + location.pathname + '#' + btn.dataset.copy;
      try{ await navigator.clipboard.writeText(url); btn.textContent='å·²è¤‡è£½'; setTimeout(()=>btn.textContent='è¤‡è£½é€£çµ',900);}catch{alert(url);}
      history.replaceState(null,'','#'+btn.dataset.copy);
    };
  });
}
function convertText(s){ return s || ''; } // å…ˆç•¶ä½œä¸è½‰æ›ï¼Œä¹‹å¾Œè¦åšç°¡ç¹è½‰å†æ›æ‰
function applyFilters() {
  const q = qEl.value.trim();  // ç”¨æˆ¶è¼¸å…¥çš„æœå°‹å­—è©
  const convertedQuery = convertText(q); // å°‡æœå°‹å­—è©è½‰æ›æˆæ­£é«”å­—

  const cat = catEl.value;
  const activeTags = $$('.chip.active', chips).map(c => c.dataset.tag);
  
  // æ ¹æ“šè½‰æ›å¾Œçš„æœå°‹æ¢ä»¶ä¾†ç¯©é¸è³‡æ–™
  const items = DATA.filter(it => {
    const hay = [it.name, it.summary, (it.tags || []).join(' ')].join(' ').toLowerCase();
    const hitQ = !convertedQuery || hay.includes(convertedQuery.toLowerCase()); // ä½¿ç”¨è½‰æ›å¾Œçš„æœå°‹æ¢ä»¶
    const hitCat = (cat === 'all') || it.category === cat;
    const hitTags = !activeTags.length || activeTags.every(t => (it.tags || []).includes(t));
    
    return hitCat && hitQ && hitTags;
  });
  
  render(items);  // æ¸²æŸ“ç¯©é¸çµæœ
}

/* Tag chips toggle */
chips.addEventListener('click', e=>{
  const t = e.target.closest('.chip'); if(!t) return;
  t.classList.toggle('active'); applyFilters();
});
qEl.addEventListener('input', applyFilters);
catEl.addEventListener('change', applyFilters);

/* ====== Modal è©³æƒ… ====== */
const modal = $('#modal'), mClose = $('#m-close');
function ulFill(ul, arr){ ul.innerHTML = (arr||[]).map(x=>`<li>${x}</li>`).join(''); }
function openModal(it){
  if(!it) return;
  $('#m-name').textContent = it.name;
  $('#m-cat').textContent = it.category;
  $('#m-img').src = it.img;
  $('#m-summary').textContent = it.summary || '-';
  $('#m-meta').textContent = `ç­‰å¾…ï¼š${it.wait||'â€”'}ã€€è²»ç”¨ï¼š${it.cost||'â€”'}`;
  ulFill($('#m-pros'), (it.pros||[]).map(x=>`<span class="pro">ï¼‹ ${x}</span>`));
  ulFill($('#m-cons'), (it.cons||[]).map(x=>`<span class="con">ï¼ ${x}</span>`));
  ulFill($('#m-inds'), it.indications||[]);
  ulFill($('#m-risks'), it.risks||[]);
  ulFill($('#m-after'), it.after||[]);
  const note = $('#m-note');
  if(it.note){ note.style.display='block'; note.textContent = it.note; } else { note.style.display='none'; }
  modal.classList.add('show'); modal.setAttribute('aria-hidden','false');
}
mClose.onclick = ()=>{ modal.classList.remove('show'); modal.setAttribute('aria-hidden','true'); };
modal.addEventListener('click', e=>{ if(e.target===modal) mClose.click(); });
document.addEventListener('keydown', e=>{ if(e.key==='Escape') mClose.click(); });

/* åˆæ¬¡è¼‰å…¥ & éŒ¨é»æ‰“é–‹ */
render(DATA); applyFilters();
if(location.hash){
  const target = DATA.find(x=> '#'+x.id === location.hash);
  if(target) openModal(target);
}
document.getElementById('compareBtn').addEventListener('click', ()=>{
  document.getElementById('compareModal').classList.add('show');
});
document.getElementById('closeCompare').addEventListener('click', ()=>{
  document.getElementById('compareModal').classList.remove('show');
});
//æ­£é«”ç°¡é«”

</script>
<!--=================-->
<p style="text-align: center; font-size: 13px; color: #999; margin-top: 40px;">
  ğŸ¾ Â© 2024 yinnlimçš„å°å®‡å®™ï½œå…§å®¹èˆ‡è¨­è¨ˆçš†ç”±ç³–ç³–æœ¬äººç”¨æ„›è£½ä½œ ğŸ’<br>
  æœªç¶“æˆæ¬Šè«‹å‹¿éš¨æ„ä½¿ç”¨ã€ç›œè½‰å–” ğŸ™…â€â™€ï¸ è¬è¬ä½ çš„å°Šé‡èˆ‡æº«æŸ” ğŸ’Œ
</p>
</body>
</html>